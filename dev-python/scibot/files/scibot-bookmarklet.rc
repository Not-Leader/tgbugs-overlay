#!/sbin/openrc-run
# Copyright 1999-2018 Gentoo Foundation
# Distributed under the terms of the GNU General Public License v2

: ${SCIBOT_GROUP:=scibot}
: ${SCIBOT_USER:=scibot}
: ${SERVICES_LOG_LOC:="/var/log/scibot"}

BOOKMARKLET_LOG="${SERVICES_LOG_LOC}/bookmarklet.log"
SYNC_LOG="${SERVICES_LOG_LOC}/sync.log"

pidfile="/var/run/scibot-bookmarklet/pid"
command="/usr/bin/scibot-bookmarklet"
#sync_command="/usr/bin/scigraph-sync"
#scibot-sync >> \"${SYNC_LOG}\" 2>&1 && scibot-bookmarklet
command_args=" >> \"${BOOKMARKLET_LOG}/\" 2>&1"
command_user="${SCIBOT_USER}:${SCIBOT_GROUP}"

depend() {
    after net
}

start_pre() {
    #if [ -f "${SYNC_LOG}" ]; then
       #touch "${SYNC_LOG}"
    #fi
    if [ -f "${BOOKMARKLET_LOG}" ]; then
       touch "${BOOKMARKLET_LOG}"
    fi
    #checkpath --directory --owner ${command_user} --mode 0775 "/var/run/scibot-bookmarklet"
}
